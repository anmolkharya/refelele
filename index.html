<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Referlele - Market Strategy Dashboard v17.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .chart-container { position: relative; width: 100%; height: 320px; }
        .nav-item.active { background-color: #4f46e5; color: white; box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.2); }
        .glass-card { background: white; border: 1px solid #e2e8f0; border-radius: 1rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        .table-container { 
            overflow-x: auto; 
            background: white; 
            border-radius: 0.75rem; 
            border: 1px solid #e2e8f0;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }
        .table-container::-webkit-scrollbar { height: 10px; }
        .table-container::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 5px; }
        .sticky-col { position: sticky; left: 0; background-color: inherit; z-index: 20; border-right: 2px solid #f1f5f9; }
        
        /* Row Styling */
        .referlele-row { background-color: #eef2ff; border-left: 4px solid #4f46e5; }
        .priority-row { background-color: #fffbeb; border-left: 4px solid #f59e0b; }
        .secondary-row { background-color: #fff; border-left: 4px solid transparent; }
        .secondary-row:hover { background-color: #f8fafc; }

        /* SWOT Colors */
        .swot-s { border-top: 4px solid #10b981; }
        .swot-w { border-top: 4px solid #f59e0b; }
        .swot-o { border-top: 4px solid #3b82f6; }
        .swot-t { border-top: 4px solid #ef4444; }
    </style>
</head>
<body class="antialiased bg-slate-50">

    <!-- Navbar -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-[1600px] mx-auto px-4 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-3">
                    <span class="text-2xl font-bold text-indigo-700 tracking-tight">Referlele<span class="text-slate-400 font-normal ml-1 text-lg">Intel Hub</span></span>
                </div>
                <div class="flex space-x-1 overflow-x-auto no-scrollbar">
                    <button onclick="switchTab('dashboard')" id="nav-dashboard" class="nav-item active px-5 py-2 rounded-lg text-sm font-semibold transition-all whitespace-nowrap">Dashboard</button>
                    <button onclick="switchTab('swot')" id="nav-swot" class="nav-item px-5 py-2 rounded-lg text-sm font-semibold transition-all whitespace-nowrap">SWOT</button>
                    <button onclick="switchTab('analytics')" id="nav-analytics" class="nav-item px-5 py-2 rounded-lg text-sm font-semibold transition-all whitespace-nowrap">Analytics</button>
                    <button onclick="switchTab('matrix')" id="nav-matrix" class="nav-item px-5 py-2 rounded-lg text-sm font-semibold transition-all whitespace-nowrap">Full Matrix</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-[1600px] mx-auto px-4 lg:px-8 py-8">

        <!-- DASHBOARD VIEW -->
        <section id="view-dashboard" class="space-y-8 fade-in">
            
            <!-- 1. EXECUTIVE SUMMARY (Added Back) -->
            <div class="bg-gradient-to-br from-indigo-900 to-indigo-800 rounded-2xl p-8 text-white shadow-lg border border-indigo-700">
                <div class="flex items-start justify-between">
                    <div>
                        <h1 class="text-3xl font-bold mb-4 flex items-center gap-3">
                            Executive Strategic Summary
                            <span class="text-xs bg-indigo-600 text-indigo-100 px-2 py-1 rounded-full border border-indigo-500 font-medium">Market Pulse</span>
                        </h1>
                        <ul class="space-y-3 text-indigo-100 text-sm md:text-base max-w-5xl leading-relaxed">
                            <li class="flex items-start">
                                <span class="text-emerald-400 mr-2 mt-1">‚óè</span>
                                <span><strong>Market Polarization:</strong> The landscape is split between <strong>High-Volume Automation</strong> (US-led: JobRight, AIApply) and <strong>Manual Community Services</strong> (India-led: Referwale). There is a vacuum in the middle for a scalable, trusted platform.</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-emerald-400 mr-2 mt-1">‚óè</span>
                                <span><strong>The "Trust vs. Speed" Gap:</strong> Competitors like <em>LazyApply</em> offer speed but are flagged as spam. Competitors like <em>Refer.me</em> offer peer connections but suffer from "ghosting". <strong>Referlele's winning wedge is "Verified Speed"</strong>‚Äîautomating the connection but verifying the human identity.</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-emerald-400 mr-2 mt-1">‚óè</span>
                                <span><strong>The "Bridge" Opportunity:</strong> A significant arbitrage opportunity exists in connecting Indian engineering talent (Supply) with Global/Remote roles (Demand). Current tools are either too localized or too generic.</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-emerald-400 mr-2 mt-1">‚óè</span>
                                <span><strong>Critical Threat Vector:</strong> <strong>AIApply</strong> and <strong>JobRight</strong> are gaining viral traction (TikTok/Social). To compete, Referlele must position itself not just as a "Tool" but as a "Network" where membership implies quality.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 2. COMPETITIVE LANDSCAPE (3-Column Layout) -->
            <div class="grid grid-cols-1 xl:grid-cols-4 gap-6 items-stretch">
                
                <!-- COLUMN 1: REFERLELE (THE HERO) -->
                <div class="xl:col-span-1 glass-card p-6 border-t-4 border-indigo-600 flex flex-col relative overflow-hidden bg-indigo-50/30">
                    <span class="w-fit px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-bold rounded uppercase mb-4">Our Base</span>
                    <h2 class="text-3xl font-bold text-indigo-800 mb-2">Referlele</h2>
                    <p class="text-sm text-slate-600 italic mb-8">"Verified Global Network"</p>
                    
                    <div class="space-y-6 flex-grow">
                        <div class="flex items-start">
                            <div class="w-8 h-8 rounded-full bg-white shadow-sm flex items-center justify-center text-indigo-600 font-bold text-sm mr-3 border border-indigo-100">1</div>
                            <div>
                                <h4 class="font-bold text-sm text-slate-800">Verified Identity</h4>
                                <p class="text-xs text-slate-500 leading-snug">LinkedIn + Work Email check.</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-8 h-8 rounded-full bg-white shadow-sm flex items-center justify-center text-indigo-600 font-bold text-sm mr-3 border border-indigo-100">2</div>
                            <div>
                                <h4 class="font-bold text-sm text-slate-800">Smart Matching</h4>
                                <p class="text-xs text-slate-500 leading-snug">AI-driven relevance.</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-8 h-8 rounded-full bg-white shadow-sm flex items-center justify-center text-indigo-600 font-bold text-sm mr-3 border border-indigo-100">3</div>
                            <div>
                                <h4 class="font-bold text-sm text-slate-800">Incentivized</h4>
                                <p class="text-xs text-slate-500 leading-snug">Credits ensure replies.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- COLUMN 2 (CENTER): THE 7 PRIORITY COMPETITORS -->
                <div class="xl:col-span-2 glass-card p-6 border-t-4 border-amber-500 bg-white">
                    <div class="flex justify-between items-center mb-6">
                        <span class="px-2 py-1 bg-amber-100 text-amber-700 text-xs font-bold rounded uppercase">Direct Threats (7)</span>
                        <div class="text-xs text-slate-400">High Impact / Direct Rivals</div>
                    </div>

                    <div id="priorityDashboardContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- JS Will Populate Priority Cards Here -->
                    </div>
                </div>

                <!-- COLUMN 3 (RIGHT): SECONDARY & OTHERS -->
                <div class="xl:col-span-1 glass-card p-6 border-l-4 border-slate-200 bg-slate-50 flex flex-col">
                    <div class="flex justify-between items-center mb-4">
                        <span class="px-2 py-1 bg-slate-200 text-slate-600 text-xs font-bold rounded uppercase">Secondary Market</span>
                        <div class="text-xs text-slate-400 font-bold">19 Players</div>
                    </div>
                    
                    <div id="secondaryDashboardContainer" class="space-y-5 overflow-y-auto pr-2 max-h-[600px] scrollbar-thin">
                        <!-- JS Will Populate Secondary Lists Here -->
                    </div>
                </div>

            </div>
        </section>

        <!-- SWOT ANALYSIS VIEW -->
        <section id="view-swot" class="hidden space-y-8 fade-in">
            <h2 class="text-2xl font-bold text-slate-900">SWOT Analysis</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- STRENGTHS -->
                <div class="glass-card p-6 swot-s bg-emerald-50/20">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="text-2xl">üí™</span>
                        <h3 class="text-lg font-bold text-emerald-800">Strengths (Internal)</h3>
                    </div>
                    <ul class="space-y-3">
                        <li class="flex items-start text-sm text-slate-700"><span class="font-bold mr-2">‚Ä¢ Verification Tech:</span> Integration of LinkedIn + Work Email builds instant trust.</li>
                        <li class="flex items-start text-sm text-slate-700"><span class="font-bold mr-2">‚Ä¢ Hybrid Model:</span> Combines AI matching speed with Community human touch.</li>
                        <li class="flex items-start text-sm text-slate-700"><span class="font-bold mr-2">‚Ä¢ UX Focus:</span> "5 Minutes to Value" promise beats clunky forums.</li>
                    </ul>
                </div>
                <!-- WEAKNESSES -->
                <div class="glass-card p-6 swot-w bg-amber-50/20">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="text-2xl">‚ö†Ô∏è</span>
                        <h3 class="text-lg font-bold text-amber-800">Weaknesses (Internal)</h3>
                    </div>
                    <ul class="space-y-3">
                        <li class="flex items-start text-sm text-slate-700"><span class="font-bold mr-2">‚Ä¢ Cold Start:</span> Launching with 0 users vs competitors with 2M+ traffic.</li>
                        <li class="flex items-start text-sm text-slate-700"><span class="font-bold mr-2">‚Ä¢ Tech Complexity:</span> Verifying work emails globally is hard.</li>
                    </ul>
                </div>
                <!-- OPPORTUNITIES -->
                <div class="glass-card p-6 swot-o bg-blue-50/20">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="text-2xl">üöÄ</span>
                        <h3 class="text-lg font-bold text-blue-800">Opportunities (External)</h3>
                    </div>
                    <ul class="space-y-3">
                        <li class="flex items-start text-sm text-slate-700"><span class="font-bold mr-2">‚Ä¢ Anti-Spam Backlash:</span> Recruiters hate "LazyApply". They want verification.</li>
                        <li class="flex items-start text-sm text-slate-700"><span class="font-bold mr-2">‚Ä¢ The "Bridge" Market:</span> Indian engineers demanding US/Remote jobs.</li>
                    </ul>
                </div>
                <!-- THREATS -->
                <div class="glass-card p-6 swot-t bg-red-50/20">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="text-2xl">üõ°Ô∏è</span>
                        <h3 class="text-lg font-bold text-red-800">Threats (External)</h3>
                    </div>
                    <ul class="space-y-3">
                        <li class="flex items-start text-sm text-slate-700"><span class="font-bold mr-2">‚Ä¢ Viral AI:</span> AIApply is growing virally on TikTok.</li>
                        <li class="flex items-start text-sm text-slate-700"><span class="font-bold mr-2">‚Ä¢ LinkedIn Native:</span> If LinkedIn builds "Ask for Referral" natively.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- ANALYTICS VIEW -->
        <section id="view-analytics" class="hidden space-y-8 fade-in">
            <h2 class="text-2xl font-bold text-slate-900">Geo & Market Analytics</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="glass-card p-6">
                    <h3 class="text-lg font-bold text-slate-800 mb-4">Top Startup Hubs (City-Level)</h3>
                    <div class="chart-container">
                        <canvas id="hubChart"></canvas>
                    </div>
                </div>
                <div class="glass-card p-6">
                    <h3 class="text-lg font-bold text-slate-800 mb-4">Target Market Segmentation</h3>
                    <div class="chart-container">
                        <canvas id="segmentChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- MATRIX VIEW -->
        <section id="view-matrix" class="hidden space-y-6 fade-in">
             <div class="flex flex-col md:flex-row justify-between items-end gap-4">
                <div>
                    <h2 class="text-2xl font-bold text-slate-900">27-Competitor Detail Matrix</h2>
                    <p class="text-sm text-slate-500">
                        <span class="inline-block w-3 h-3 bg-indigo-500 rounded-full mr-1"></span>Referlele 
                        <span class="inline-block w-3 h-3 bg-amber-400 rounded-full mr-1 ml-2"></span>Priority
                        <span class="inline-block w-3 h-3 bg-white border border-slate-300 rounded-full mr-1 ml-2"></span>Secondary
                    </p>
                </div>
                <input type="text" id="matrixSearch" placeholder="Search (e.g., 'San Francisco', 'Recruiters')..." class="w-full md:w-80 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none">
            </div>

            <div class="table-container">
                <table class="min-w-max w-full divide-y divide-slate-200 text-left">
                    <thead class="bg-slate-50 text-[10px] uppercase font-bold text-slate-500">
                        <tr>
                            <th class="px-4 py-4 sticky-col bg-slate-50 shadow-sm">Company Name</th>
                            <th class="px-4 py-4 text-indigo-700">HQ Location (City)</th>
                            <th class="px-4 py-4 text-emerald-700">Target Market</th>
                            <th class="px-4 py-4">Category</th>
                            <th class="px-4 py-4">Founder(s)</th>
                            <th class="px-4 py-4">LinkedIn</th>
                            <th class="px-4 py-4 w-64">Product</th>
                            <th class="px-4 py-4">Investors</th>
                            <th class="px-4 py-4">Traffic</th>
                            <th class="px-4 py-4">Differentiation</th>
                        </tr>
                    </thead>
                    <tbody id="matrixBody" class="text-xs divide-y divide-slate-200">
                        <!-- JS Injection -->
                    </tbody>
                </table>
            </div>
        </section>

    </main>

    <script>
        // --- 27-ITEM DATASET (WITH GEO & TARGET) ---
        const competitors = [
            // HERO (1)
            { name: "Referlele", type: "hero", cat: "Verified Network", market: "Seekers & Employees", country: "Bengaluru, India (Est)", founders: "TBD", li: "N/A", bg: "N/A", idea: "Verified work email referrals + AI Match.", inv: "Target Seed", traffic: "Pre-launch", diff: "Trust" },

            // PRIORITY (7)
            { name: "AIApply", type: "priority", cat: "AI Tooling", market: "Job Seekers", country: "Chicago, USA", founders: "Aidan", li: "link", bg: "USA", idea: "Viral AI resume & auto-apply tool.", inv: "Bootstrapped", traffic: "450k+", diff: "Viral Growth" },
            { name: "JobRight.ai", type: "priority", cat: "AI Agent", market: "Job Seekers", country: "San Francisco, USA", founders: "Eric Chen", li: "link", bg: "Berkeley", idea: "AI Search Agent.", inv: "Seed", traffic: "120k", diff: "AI Search" },
            { name: "Referwale", type: "priority", cat: "Community", market: "Tech Workers", country: "Noida, India", founders: "Sumit Kumar", li: "link", bg: "India", idea: "Community platform.", inv: "Bootstrapped", traffic: "45k", diff: "Community" },
            { name: "Refer.me", type: "priority", cat: "Marketplace", market: "Job Seekers", country: "London, UK", founders: "Daniel Bakh", li: "link", bg: "UK", idea: "P2P referral market.", inv: "Pre-Seed", traffic: "250k", diff: "Credits" },
            { name: "LazyApply", type: "priority", cat: "Automation", market: "Job Seekers", country: "Jalandhar, India", founders: "Prakhar Gupta", li: "link", bg: "India", idea: "Bulk automation.", inv: "YC S21", traffic: "350k", diff: "Volume" },
            { name: "Sorce", type: "priority", cat: "Swipe UX", market: "Gen Z", country: "Atlanta, USA", founders: "Bahaa Atwah", li: "link", bg: "Georgia Tech", idea: "Tinder for Jobs.", inv: "YC W22", traffic: "15k", diff: "Gen Z" },
            { name: "Uproot.site", type: "priority", cat: "Niche Tool", market: "Workday Users", country: "Remote / Global", founders: "Team", li: "N/A", bg: "Global", idea: "Workday bypass.", inv: "Bootstrapped", traffic: "25k", diff: "Niche" },

            // SECONDARY (19)
            { name: "Simplify.jobs", type: "secondary", cat: "Autofill", market: "Job Seekers", country: "San Francisco, USA", founders: "Michael Yan", li: "link", bg: "Berkeley", idea: "Autofill Extension.", inv: "YC W21", traffic: "2.8M", diff: "Scale" },
            { name: "Teal", type: "secondary", cat: "Career CRM", market: "Job Seekers", country: "Miami, USA", founders: "Dave Fano", li: "link", bg: "Columbia", idea: "Career CRM.", inv: "Series A", traffic: "1.3M", diff: "CRM" },
            { name: "Wonsulting", type: "secondary", cat: "Influencer", market: "Students", country: "Los Angeles, USA", founders: "J. Javier", li: "link", bg: "USA", idea: "NetworkAI.", inv: "Bootstrapped", traffic: "620k", diff: "Brand" },
            { name: "LoopCV", type: "secondary", cat: "RPA", market: "Job Seekers", country: "Patras, Greece", founders: "George P.", li: "link", bg: "Greece", idea: "Job RPA.", inv: "Pre-Seed", traffic: "190k", diff: "RPA" },
            { name: "Massive", type: "secondary", cat: "Automation", market: "Top Talent", country: "London, UK", founders: "Indiana G.", li: "link", bg: "UK", idea: "Quality Auto.", inv: "YC W21", traffic: "55k", diff: "Curation" },
            { name: "Weekday", type: "secondary", cat: "Sourcing", market: "Recruiters", country: "San Francisco / Bangalore", founders: "Amit Singh", li: "link", bg: "India", idea: "Recruiter Sourcing.", inv: "YC W21", traffic: "85k", diff: "Recruiter" },
            { name: "Draftboard", type: "secondary", cat: "Bounties", market: "Referrers", country: "New York, USA", founders: "Zach S.", li: "link", bg: "USA", idea: "Bounties.", inv: "Pre-Seed", traffic: "22k", diff: "Money" },
            { name: "Careerflow.ai", type: "secondary", cat: "Optimizer", market: "Job Seekers", country: "Pune, India / USA", founders: "Nikita G.", li: "link", bg: "USA", idea: "LI Optimizer.", inv: "Angels", traffic: "320k", diff: "LI" },
            { name: "Jumbl", type: "secondary", cat: "Aggregator", market: "Remote", country: "Remote / Global", founders: "Unknown", li: "N/A", bg: "N/A", idea: "Job aggregator.", inv: "Unknown", traffic: "10k+", diff: "Aggregation" },
            { name: "EasyRefer.in", type: "secondary", cat: "Community", market: "Job Seekers", country: "Bengaluru, India", founders: "Unknown", li: "N/A", bg: "India", idea: "Referral exchange.", inv: "Bootstrapped", traffic: "20k+", diff: "Geo-Focus" },
            { name: "EmployeeReferrals.com", type: "secondary", cat: "B2B", market: "Enterprise", country: "Salt Lake City, USA", founders: "Team", li: "link", bg: "USA", idea: "Enterprise software.", inv: "Venture", traffic: "50k+", diff: "B2B Sales" },
            { name: "Stark.ai", type: "secondary", cat: "AI Search", market: "Job Seekers", country: "Bengaluru, India", founders: "Unknown", li: "N/A", bg: "India", idea: "AI-driven matching.", inv: "Seed", traffic: "30k+", diff: "AI Matching" },
            { name: "JobCopilot", type: "secondary", cat: "Automation", market: "Job Seekers", country: "Remote / Global", founders: "Unknown", li: "N/A", bg: "Global", idea: "Auto-apply.", inv: "Bootstrapped", traffic: "15k+", diff: "Extension" },
            { name: "Getmereferred", type: "secondary", cat: "Service", market: "Job Seekers", country: "Bengaluru, India", founders: "Unknown", li: "N/A", bg: "India", idea: "Referral agency.", inv: "Bootstrapped", traffic: "10k+", diff: "Service" },
            { name: "Referloops", type: "secondary", cat: "B2B Loop", market: "Companies", country: "India (TBD)", founders: "Unknown", li: "N/A", bg: "India", idea: "Internal Loops.", inv: "Bootstrapped", traffic: "18k", diff: "B2B" },
            { name: "Call For Referral", type: "secondary", cat: "Service", market: "Job Seekers", country: "Remote / Global", founders: "Group", li: "N/A", bg: "Global", idea: "Manual Service.", inv: "N/A", traffic: "<5k", diff: "Service" },
            { name: "BoostMyReferral", type: "secondary", cat: "Templates", market: "Job Seekers", country: "India (TBD)", founders: "Vivek D.", li: "link", bg: "India", idea: "Templates.", inv: "Bootstrapped", traffic: "<5k", diff: "Temps" },
            { name: "Sonara", type: "secondary", cat: "Automation", market: "Job Seekers", country: "Austin, USA", founders: "Victor I.", li: "link", bg: "USA", idea: "Daily Auto.", inv: "Bootstrapped", traffic: "45k", diff: "Daily" },
            { name: "Pyjama Jobs", type: "secondary", cat: "Remote", market: "Remote Devs", country: "Remote / Global", founders: "Group", li: "N/A", bg: "India", idea: "Remote Jobs.", inv: "Bootstrapped", traffic: "12k", diff: "Remote" }
        ];

        // --- RENDER DASHBOARD LISTS ---
        function renderDashboardLists() {
            // Render Priority Cards
            const priContainer = document.getElementById('priorityDashboardContainer');
            const priorities = competitors.filter(c => c.type === 'priority');
            
            let priHtml = '';
            priorities.forEach(c => {
                priHtml += `
                    <div class="p-4 rounded-lg bg-slate-50 border border-slate-100 hover:shadow-md transition-all">
                        <div class="flex justify-between items-start mb-1">
                            <span class="font-bold text-slate-800">${c.name}</span>
                            <span class="text-[9px] bg-white border border-slate-200 px-1.5 py-0.5 rounded text-slate-500 font-mono">${c.traffic}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-[10px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded font-bold uppercase">${c.cat}</span>
                        </div>
                    </div>
                `;
            });
            priContainer.innerHTML = priHtml;

            // Render Secondary List
            const secContainer = document.getElementById('secondaryDashboardContainer');
            const secondaries = competitors.filter(c => c.type === 'secondary');
            
            // Group by Category
            const categories = {};
            secondaries.forEach(item => {
                const key = item.cat.includes('Auto') || item.cat.includes('Tool') ? 'Automation & Tools' :
                            item.cat.includes('Community') || item.cat.includes('Service') ? 'Services & Community' :
                            'Others';
                if (!categories[key]) categories[key] = [];
                categories[key].push(item);
            });

            let secHtml = '';
            for (const [catName, items] of Object.entries(categories)) {
                secHtml += `
                    <div class="mb-4 last:mb-0">
                        <h4 class="text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 sticky top-0 bg-slate-50 py-1">${catName}</h4>
                        <div class="flex flex-wrap gap-2">
                            ${items.map(item => `
                                <div class="px-3 py-1.5 bg-white border border-slate-200 rounded text-xs text-slate-600 flex items-center shadow-sm hover:border-slate-300 transition-colors w-full justify-between">
                                    <span class="font-medium truncate">${item.name}</span>
                                    <span class="text-[9px] text-slate-400 bg-slate-100 px-1 rounded ml-2 whitespace-nowrap">${item.traffic}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            secContainer.innerHTML = secHtml;
        }

        // --- RENDER MATRIX TABLE ---
        function renderTable(data) {
            const body = document.getElementById('matrixBody');
            body.innerHTML = '';
            
            const sorted = [...data].sort((a, b) => {
                const map = { 'hero': 0, 'priority': 1, 'secondary': 2 };
                return map[a.type] - map[b.type];
            });

            sorted.forEach(item => {
                const tr = document.createElement('tr');
                if (item.type === 'hero') tr.className = "referlele-row font-medium";
                else if (item.type === 'priority') tr.className = "priority-row";
                else tr.className = "secondary-row";

                tr.innerHTML = `
                    <td class="px-4 py-3 sticky-col font-bold text-slate-800 shadow-sm whitespace-nowrap">${item.type === 'priority' ? '‚ö†Ô∏è ' : ''}${item.name}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-indigo-700 font-medium">${item.country}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-emerald-700 font-medium">${item.market}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-slate-500 text-[10px] uppercase">${item.cat}</td>
                    <td class="px-4 py-3 font-medium whitespace-nowrap">${item.founders}</td>
                    <td class="px-4 py-3 whitespace-nowrap">${item.li !== 'N/A' && item.li !== 'link' ? '<a href="#" class="text-indigo-600 hover:underline">Profile</a>' : '-'}</td>
                    <td class="px-4 py-3 leading-snug w-64 text-slate-600 min-w-[200px] text-[10px]">${item.idea}</td>
                    <td class="px-4 py-3 text-indigo-600 font-medium whitespace-nowrap">${item.inv}</td>
                    <td class="px-4 py-3 font-mono font-bold whitespace-nowrap">${item.traffic}</td>
                    <td class="px-4 py-3 whitespace-nowrap"><span class="px-2 py-0.5 bg-slate-100 text-slate-600 rounded text-[9px] border border-slate-200">${item.diff}</span></td>
                `;
                body.appendChild(tr);
            });
        }

        // --- CHARTS ---
        function initCharts() {
            // Hub Chart
            const ctxHub = document.getElementById('hubChart').getContext('2d');
            new Chart(ctxHub, {
                type: 'bar',
                data: {
                    labels: ['San Francisco', 'Bengaluru/Pune/Noida', 'London/UK', 'Remote/Global', 'Other US Cities'],
                    datasets: [{
                        label: 'Competitor Count',
                        data: [5, 9, 3, 5, 5],
                        backgroundColor: ['#4f46e5', '#f59e0b', '#ef4444', '#cbd5e1', '#64748b'],
                        borderRadius: 6
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });

            // Segment Chart
            const ctxSeg = document.getElementById('segmentChart').getContext('2d');
            new Chart(ctxSeg, {
                type: 'doughnut',
                data: {
                    labels: ['Job Seekers (B2C)', 'Recruiters/HR (B2B)', 'Gen Z', 'Enterprise'],
                    datasets: [{
                        data: [18, 3, 2, 4],
                        backgroundColor: ['#4f46e5', '#f59e0b', '#ef4444', '#cbd5e1'],
                        borderRadius: 6
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right' } } }
            });
        }

        function switchTab(tabId) {
            document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`nav-${tabId}`).classList.add('active');
            document.querySelectorAll('section').forEach(sec => sec.classList.add('hidden'));
            document.getElementById(`view-${tabId}`).classList.remove('hidden');
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderDashboardLists();
            renderTable(competitors);
            initCharts();
            
            document.getElementById('matrixSearch').addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase();
                const filtered = competitors.filter(c => c.name.toLowerCase().includes(term) || c.country.toLowerCase().includes(term) || c.market.toLowerCase().includes(term));
                renderTable(filtered);
            });
        });
    </script>
</body>
</html>
